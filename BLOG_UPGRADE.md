# 博客功能升级计划

**创建时间**: 2025-01-23
**状态**: v1.7.0 已完成富文本编辑器

---

## 📋 升级任务列表

### 2. 搜索功能
- [ ] 后端: 添加搜索 API（支持标题、内容搜索）
- [ ] 前端: 添加搜索框组件
- [ ] 前端: 集成搜索到博客列表页
- [ ] 测试: 验证搜索功能

### 3. 草稿功能
- [ ] 后端: Blog 模型添加 status 字段 (draft/published)
- [ ] 后端: 迁移现有数据
- [ ] 后端: 更新 API（草稿仅作者可见）
- [ ] 前端: 添加草稿箱页面
- [ ] 前端: 创建/编辑页面添加保存草稿功能
- [ ] 测试: 验证草稿功能

### 4. 富文本编辑器 ✅
- [x] 选型: 选择富文本编辑器（TipTap / Lexical / 其他）→ 已选择 TipTap
- [x] 安装: 安装编辑器依赖
- [x] 后端: 添加图片/视频上传接口
- [x] 前端: 替换 CreateBlog/EditBlog 的编辑器
- [x] 前端: 添加工具栏（加粗、斜体、标题、列表等）
- [x] 前端: 添加富文本内容样式
- [x] 测试: 验证富文本编辑和渲染

**已完成功能**（v1.7.0）：
- ✅ TipTap 富文本编辑器集成
- ✅ 图片上传与自动压缩
- ✅ 视频上传与服务器端压缩（FFmpeg）
- ✅ 自动清理未使用媒体文件
- ✅ 文本格式化、链接、对齐等丰富功能

### 5. 评论系统
- [ ] 后端: 创建 Comment 模型
- [ ] 后端: 创建 Comment Schema
- [ ] 后端: 创建评论 API (CRUD)
- [ ] 前端: 创建 Comment 类型定义
- [ ] 前端: 创建评论 API 客户端
- [ ] 前端: 创建评论组件
- [ ] 前端: 集成评论到博客详情页
- [ ] 测试: 验证评论功能

### 6. 点赞/收藏功能
- [ ] 后端: 创建 Like 模型（用户-博客关联）
- [ ] 后端: 创建 Favorite 模型（用户-博客关联）
- [ ] 后端: 添加点赞/收藏 API
- [ ] 后端: Blog 模型添加 likes_count 字段
- [ ] 前端: 创建相关类型定义
- [ ] 前端: 创建点赞/收藏 API 客户端
- [ ] 前端: 添加点赞/收藏按钮组件
- [ ] 前端: 添加我的收藏页面
- [ ] 测试: 验证点赞/收藏功能

---

## 🎯 实施进度

**v1.7.0 已完成**：
- ✅ 富文本编辑器（TipTap）
- ✅ 图片自动压缩
- ✅ 视频服务器端压缩
- ✅ 媒体文件自动清理

**下一步计划（v1.8.0）**：
- ⏳ 搜索功能
- ⏳ 草稿功能
- ⏳ 评论系统
- ⏳ 点赞/收藏功能

---

## 📝 实施记录

### 2025-01-23
- ✅ 创建任务计划文档
- ✅ 实现富文本编辑器功能（TipTap）
  - 后端：添加图片/视频上传接口
  - 前端：集成 TipTap 富文本编辑器
  - 支持功能：文本格式化、标题、列表、链接、图片、视频、对齐方式等
- ✅ 实现图片自动压缩（browser-image-compression）
- ✅ 实现视频服务器端压缩（FFmpeg + ffmpeg-python）
- ✅ 实现媒体文件自动清理功能
- ✅ 更新项目文档（README.md、PROGRESS.md）

---

## ⚠️ 注意事项

1. **数据库迁移**: 草稿功能需要修改 Blog 表结构
2. **类型同步**: 前后端类型定义必须保持一致
3. **权限控制**: 评论、点赞/收藏需要登录
4. **性能优化**: 搜索功能考虑添加索引
5. **兼容性**: 富文本编辑器需考虑移动端适配
6. **FFmpeg 配置**: 视频压缩功能需要 FFmpeg，详见 README.md 配置说明
